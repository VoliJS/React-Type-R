<<<<<<< HEAD
{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../lib/define/state.js","../lib/define/store.js","../lib/define/typeSpecs.js","../lib/define/context.js","../lib/define/propUpdatesTracking.js","../lib/define/props.js","../lib/define/index.js","../lib/valuelink/helpers.js","../lib/link.js","../lib/component.js","../lib/valuelink/link.js","../lib/index.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import * as tslib_1 from \"tslib\";\n/*****************\n * State\n */\nimport { define, Record, Store } from 'type-r';\nexport default function process(definition, BaseComponentClass) {\n    var prototype = this.prototype;\n    var state = definition.state, State = definition.State;\n    if (typeof state === 'function') {\n        State = state;\n        state = void 0;\n    }\n    if (state) {\n        var BaseClass = State || prototype.State || Record;\n        var ComponentState = /** @class */ (function (_super) {\n            tslib_1.__extends(ComponentState, _super);\n            function ComponentState() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            ComponentState.attributes = state;\n            ComponentState = tslib_1.__decorate([\n                define\n            ], ComponentState);\n            return ComponentState;\n        }(BaseClass));\n        prototype.State = ComponentState;\n    }\n    else if (State) {\n        prototype.State = State;\n    }\n    if (state || State) {\n        this.mixins.merge([StateMixin, UpdateOnNestedChangesMixin]);\n    }\n}\nexport var StateMixin = {\n    //state : null,\n    _initializeState: function () {\n        // props.__keepState is used to workaround issues in Backbone intergation layer\n        var state = this.state = this.props.__keepState || new this.State();\n        // Take ownership on state...\n        state._owner = this;\n        state._ownerKey = 'state';\n    },\n    context: {\n        _nestedStore: Store\n    },\n    // reference global store to fix model's store locator\n    getStore: function () {\n        // Attempt to get the store from the context first. Then - fallback to the state's default store.\n        // TBD: Need to figure out a good way of managing local stores.\n        var context, state;\n        return ((context = this.context) && context._nestedStore) ||\n            ((state = this.state) && state._defaultStore) || Store.global;\n    },\n    componentWillUnmount: function () {\n        var state = this.state;\n        state._owner = state._ownerKey = void 0;\n        this._preventDispose /* hack for component-view to preserve the state */ || state.dispose();\n        this.state = void 0;\n    }\n};\nexport var UpdateOnNestedChangesMixin = {\n    _onChildrenChange: function () { },\n    componentDidMount: function () {\n        this._onChildrenChange = this.asyncUpdate;\n    }\n};\n//# sourceMappingURL=state.js.map","import * as tslib_1 from \"tslib\";\nimport { define, Store } from 'type-r';\nimport { StateMixin, UpdateOnNestedChangesMixin } from './state';\nexport default function onDefine(definition, BaseClass) {\n    var store = definition.store, StoreClass = definition.Store;\n    if (store && store instanceof Store) {\n        // Direct reference to an existing store. Put it to the prototype.\n        this.prototype.store = store;\n        this.mixins.merge([ExternalStoreMixin, ExposeStoreMixin]);\n    }\n    else if (store || definition.Store) {\n        if (typeof store === 'function') {\n            StoreClass = store;\n            store = void 0;\n        }\n        if (store) {\n            var BaseClass_1 = StoreClass || this.prototype.Store || Store;\n            var InternalStore = /** @class */ (function (_super) {\n                tslib_1.__extends(InternalStore, _super);\n                function InternalStore() {\n                    return _super !== null && _super.apply(this, arguments) || this;\n                }\n                InternalStore.attrbutes = store;\n                InternalStore = tslib_1.__decorate([\n                    define\n                ], InternalStore);\n                return InternalStore;\n            }(BaseClass_1));\n            ;\n            this.prototype.Store = InternalStore;\n        }\n        else if (StoreClass) {\n            this.prototype.Store = StoreClass;\n        }\n        this.mixins.merge([InternalStoreMixin, UpdateOnNestedChangesMixin, ExposeStoreMixin]);\n    }\n}\n/**\n * Attached whenever the store declaration of any form is present in the component.\n */\nvar ExposeStoreMixin = {\n    childContext: {\n        _nestedStore: Store\n    },\n    getChildContext: function () {\n        return { _nestedStore: this.store };\n    },\n    getStore: function () {\n        return this.store;\n    },\n    // Will be called by the store when the lookup will fail.\n    get: function (key) {\n        // Ask upper store.\n        var store = StateMixin.getStore.call(this);\n        return store && store.get(key);\n    }\n};\n/**\n * External store must just track the changes and trigger render.\n * TBD: don't use it yet.\n */\nvar ExternalStoreMixin = {\n    componentDidMount: function () {\n        // Start UI updates on state changes.\n        this.listenTo(this.store, 'change', this.asyncUpdate);\n    }\n};\nvar InternalStoreMixin = {\n    componentWillMount: function () {\n        var store = this.store = new this.Store();\n        store._owner = this;\n        store._ownerKey = 'store';\n    },\n    componentWillUnmount: function () {\n        this.store._ownerKey = this.store._owner = void 0;\n        this.store.dispose();\n        this.store = void 0;\n    }\n};\n//# sourceMappingURL=store.js.map","import * as PropTypes from 'prop-types';\nimport { Record } from 'type-r';\nexport function compileSpecs(props) {\n    var propTypes = {}, \n    // Create NestedTypes model definition to process props spec.\n    modelProto = Record.defaults(props).prototype;\n    var defaults, watchers, changeHandlers;\n    modelProto.forEachAttr(modelProto._attributes, function (spec, name) {\n        // Skip auto-generated `id` attribute.\n        if (name !== 'id') {\n            var value = spec.value, type = spec.type, options = spec.options;\n            // Translate props type to the propTypes guard.\n            propTypes[name] = translateType(type, options.isRequired);\n            if (options._onChange) {\n                watchers || (watchers = {});\n                watchers[name] = toLocalWatcher(options._onChange);\n            }\n            // Handle listening to event maps...\n            if (options.changeHandlers && options.changeHandlers.length) {\n                changeHandlers || (changeHandlers = {});\n                changeHandlers[name] = options.changeHandlers;\n            }\n            // Handle listening to props changes...\n            if (options.changeEvents) {\n                changeHandlers || (changeHandlers = {});\n                var handlers = changeHandlers[name] || (changeHandlers[name] = []), changeEvents_1 = typeof options.changeEvents === 'string' ? options.changeEvents : null;\n                handlers.push(function (next, prev, component) {\n                    prev && component.stopListening(prev);\n                    next && component.listenTo(next, changeEvents_1 || next._changeEventName, component.asyncUpdate);\n                });\n            }\n            // If default value is explicitly provided...\n            if (value !== void 0) {\n                //...append it to getDefaultProps function.\n                defaults || (defaults = {});\n                defaults[name] = spec.convert(value, void 0, null, {});\n            }\n        }\n    });\n    return { propTypes: propTypes, defaults: defaults, watchers: watchers, changeHandlers: changeHandlers };\n}\nfunction toLocalWatcher(ref) {\n    return typeof ref === 'function' ? ref : function (value, name) {\n        this[ref] && this[ref](value, name);\n    };\n}\nvar Node = /** @class */ (function () {\n    function Node() {\n    }\n    return Node;\n}());\nexport { Node };\nvar Element = /** @class */ (function () {\n    function Element() {\n    }\n    return Element;\n}());\nexport { Element };\nfunction translateType(Type, isRequired) {\n    var T = _translateType(Type);\n    return isRequired ? T.isRequired : T;\n}\nfunction _translateType(Type) {\n    switch (Type) {\n        case Number:\n        case Number.integer:\n            return PropTypes.number;\n        case String:\n            return PropTypes.string;\n        case Boolean:\n            return PropTypes.bool;\n        case Array:\n            return PropTypes.array;\n        case Function:\n            return PropTypes.func;\n        case Object:\n            return PropTypes.object;\n        case Node:\n            return PropTypes.node;\n        case Element:\n            return PropTypes.element;\n        case void 0:\n        case null:\n            return PropTypes.any;\n        default:\n            return PropTypes.instanceOf(Type);\n    }\n}\n//# sourceMappingURL=typeSpecs.js.map","import { compileSpecs } from './typeSpecs';\nimport { tools } from 'type-r';\nexport default function onDefine(_a, BaseClass) {\n    var context = _a.context, childContext = _a.childContext;\n    var prototype = this.prototype;\n    if (context) {\n        // Merge in inherited members...\n        prototype._context = tools.defaults(context, BaseClass.prototype._context || {});\n        // Compile to propTypes...\n        this.contextTypes = compileSpecs(context).propTypes;\n    }\n    if (childContext) {\n        prototype._childContext = tools.defaults(childContext, BaseClass.prototype._childContext);\n        this.childContextTypes = compileSpecs(childContext).propTypes;\n    }\n}\n//# sourceMappingURL=context.js.map","export function createChangeTokensConstructor(props, watchers) {\n    if (watchers === void 0) { watchers = {}; }\n    var propNames = Object.keys(props);\n    var PropsChangeTokens = new Function('p', 's', \"\\n        var v;\\n        this._s = s && s._changeToken;\\n        this._isDirty = false;\\n        \" + propNames.map(function (name) { return \"\\n            this.\" + name + \" = ( ( v = p.\" + name + \") && v._changeToken ) || v;\\n        \"; }).join('') + \"\\n    \");\n    PropsChangeTokens.prototype._update = new Function('p', 't', \"\\n        var v, tk, upd = false;\\n        \\n        \" + propNames.map(function (name) { return \"\\n            v = p.\" + name + \", tk = ( v && v._changeToken ) || v;\\n            if( this.\" + name + \" !== tk ){\\n                \" + (watchers[name] ? \"t._watchers.\" + name + \".call( t, v, '\" + name + \"' );\" : '') + \"\\n                this.\" + name + \" = tk;\\n                upd = true;\\n            };\\n        \"; }).join('') + \"\\n        \\n        return upd;\\n    \");\n    return PropsChangeTokens;\n}\n;\nexport var EmptyPropsChangeTokensCtor = createChangeTokensConstructor({}, {});\n// Both pure render and watcher enables props updates tracking.\nexport var PropsChangesMixin = {\n    shouldComponentUpdate: function (nextProps) {\n        var _a = this, _silent = _a._silent, state = _a.state, _propsChangeTokens = _a._propsChangeTokens;\n        this._silent = 1; // watchers\n        var upd = _propsChangeTokens._update(nextProps, this); // both \n        if (state && _propsChangeTokens._s !== state._changeToken) { // pure render\n            _propsChangeTokens._s = state._changeToken;\n            upd = true; // pure render\n        }\n        _propsChangeTokens._isDirty || (_propsChangeTokens._isDirty = upd); // pure render\n        if (_silent)\n            return false;\n        this._silent = 0;\n        return !this.pureRender || _propsChangeTokens._isDirty;\n    },\n    // We need to know if the component was actually rendered.\n    componentDidUpdate: function () {\n        this._propsChangeTokens._isDirty = false;\n    },\n    componentDidMount: function () {\n        this._propsChangeTokens = new this.PropsChangeTokens(this.props, this.state);\n    }\n};\nexport var WatchersMixin = {\n    componentWillMount: function () {\n        var _a = this, _watchers = _a._watchers, props = _a.props;\n        for (var name_1 in _watchers) {\n            _watchers[name_1].call(this, props[name_1], name_1);\n        }\n    }\n};\n//# sourceMappingURL=propUpdatesTracking.js.map","/**\n * Handle props specification and everything which is related:\n * - local listening to props changes\n * - pure render mixin\n */\nimport { compileSpecs } from './typeSpecs';\nimport { WatchersMixin, PropsChangesMixin, createChangeTokensConstructor } from './propUpdatesTracking';\nimport { tools } from 'type-r';\nexport default function onDefine(_a, BaseClass) {\n    var props = _a.props, pureRender = _a.pureRender;\n    var prototype = this.prototype;\n    // process props spec...\n    if (props) {\n        // Merge with inherited members.\n        prototype._props = tools.defaults(props, BaseClass.prototype._props || {});\n        // Compile props spec.\n        var _b = compileSpecs(props), propTypes = _b.propTypes, defaults = _b.defaults, watchers = _b.watchers, changeHandlers = _b.changeHandlers;\n        this.propTypes = propTypes;\n        if (defaults)\n            this.defaultProps = defaults;\n        // Watchers require props updates tracking.\n        if (watchers) {\n            prototype._watchers = watchers;\n            this.mixins.merge([WatchersMixin]);\n        }\n        if (changeHandlers) {\n            prototype._changeHandlers = changeHandlers;\n            this.mixins.merge([ChangeHandlersMixin]);\n        }\n        // If pure render is defined in parent and props have changed,\n        // or if we have watchers defined, we need a new constructor.\n        if (prototype.pureRender || watchers) {\n            this.mixins.merge([PropsChangesMixin]);\n            prototype.PropsChangeTokens = createChangeTokensConstructor(props, watchers);\n        }\n    }\n    else if (pureRender) {\n        // If pure render is defined, need a new construtor even if props has not been defined.\n        this.mixins.merge([PropsChangesMixin]);\n        prototype.PropsChangeTokens = createChangeTokensConstructor(prototype._props, prototype._watchers);\n    }\n}\n/**\n * ChangeHandlers are fired in sequence upon props replacement.\n * Fires _after_ UI is updated. Used for managing events subscriptions.\n */\nvar ChangeHandlersMixin = {\n    componentDidMount: function () {\n        handlePropsChanges(this, {}, this.props);\n    },\n    componentDidUpdate: function (prev) {\n        handlePropsChanges(this, prev, this.props);\n    },\n    componentWillUnmount: function () {\n        handlePropsChanges(this, this.props, {});\n    }\n};\nfunction handlePropsChanges(component, prev, next) {\n    var _changeHandlers = component._changeHandlers;\n    for (var name_1 in _changeHandlers) {\n        if (prev[name_1] !== next[name_1]) {\n            for (var _i = 0, _a = _changeHandlers[name_1]; _i < _a.length; _i++) {\n                var handler = _a[_i];\n                handler(next[name_1], prev[name_1], component);\n            }\n        }\n    }\n}\n//# sourceMappingURL=props.js.map","import { Messenger } from 'type-r';\nimport onDefineStore from './store';\nimport onDefineState from './state';\nimport onDefineContext from './context';\nimport onDefineProps from './props';\nexport default function onDefine(definition, BaseClass) {\n    // Initialize mixins placeholder...\n    onDefineStore.call(this, definition, BaseClass);\n    onDefineState.call(this, definition, BaseClass);\n    onDefineContext.call(this, definition, BaseClass);\n    onDefineProps.call(this, definition, BaseClass);\n    Messenger.onDefine.call(this, definition, BaseClass);\n}\n;\nexport { Node, Element } from './typeSpecs';\nexport { EmptyPropsChangeTokensCtor } from './propUpdatesTracking';\n//# sourceMappingURL=index.js.map","var ArrayProto = Array.prototype, ObjectProto = Object.prototype;\nexport function helpers(value) {\n    if (value && typeof value === 'object') {\n        switch (Object.getPrototypeOf(value)) {\n            case ArrayProto: return arrayHelpers;\n            case ObjectProto: return objectHelpers;\n        }\n    }\n    return dummyHelpers;\n}\n// Do nothing for types other than Array and plain Object.\nvar dummyHelpers = {\n    clone: function (value) { return value; },\n    map: function (link, fun) { return []; },\n    remove: function (value) { return value; }\n};\n// `map` and `clone` for plain JS objects\nexport var objectHelpers = {\n    // Map through the link to object\n    map: function (link, iterator) {\n        var mapped = [];\n        for (var key in link.value) {\n            var element = iterator(link.at(key), key);\n            element === void 0 || (mapped.push(element));\n        }\n        return mapped;\n    },\n    remove: function (object, key) {\n        delete object[key];\n        return object;\n    },\n    // Shallow clone plain JS object\n    clone: function (object) {\n        var cloned = {};\n        for (var key in object) {\n            cloned[key] = object[key];\n        }\n        return cloned;\n    }\n};\n// `map` and `clone` helpers for arrays.\nexport var arrayHelpers = {\n    // Shallow clone array\n    clone: function (array) {\n        return array.slice();\n    },\n    remove: function (array, i) {\n        array.splice(i, 1);\n        return array;\n    },\n    // Map through the link to array\n    map: function (link, iterator) {\n        var length = link.value.length, mapped = Array(length);\n        for (var i = 0, j = 0; i < length; i++) {\n            var y = iterator(link.at(i), i);\n            y === void 0 || (mapped[j++] = y);\n        }\n        mapped.length === j || (mapped.length = j);\n        return mapped;\n    }\n};\n//# sourceMappingURL=helpers.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Import ValueLink library\n * Define value links binding mixins to the Record and Collection\n */\nimport { Mixable, MixinsState, Record } from 'type-r';\nimport { Link } from './valuelink/link';\nexport default Link;\nMixable.mixins.populate(Link);\n/**\n * Record\n */\nMixinsState.get(Record).merge([{\n        // Link to the record's attribute by its key.\n        linkAt: function (key) {\n            return cacheLink(getLinksCache(this), this, key);\n        },\n        // Link to the attribute of the record's tree by symbolic path.\n        linkPath: function (path, options) {\n            return new RecordDeepLink(this, path, options);\n        },\n        // Link all (or listed) attributes and return links cache.\n        linkAll: function () {\n            var links = getLinksCache(this);\n            if (arguments.length) {\n                for (var i = 0; i < arguments.length; i++) {\n                    cacheLink(links, this, arguments[i]);\n                }\n            }\n            else {\n                var attributes = this.attributes;\n                for (var key in attributes) {\n                    attributes[key] === void 0 || cacheLink(links, this, key);\n                }\n            }\n            return links;\n        }\n    }]);\n/**\n * Link to Type-R's record attribute.\n * Strict evaluation of value, lazy evaluation of validation error.\n * Links are cached in the records\n */\nvar RecordLink = /** @class */ (function (_super) {\n    tslib_1.__extends(RecordLink, _super);\n    function RecordLink(record, attr, value) {\n        var _this = _super.call(this, value) || this;\n        _this.record = record;\n        _this.attr = attr;\n        return _this;\n    }\n    RecordLink.prototype.set = function (x) {\n        this.record[this.attr] = x;\n    };\n    Object.defineProperty(RecordLink.prototype, \"error\", {\n        get: function () {\n            return this._error === void 0 ?\n                this.record.getValidationError(this.attr) :\n                this._error;\n        },\n        set: function (x) {\n            this._error = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RecordLink.prototype.assignFrom = function (other) {\n        this.value.assignFrom(other);\n    };\n    return RecordLink;\n}(Link));\nvar RecordDeepLink = /** @class */ (function (_super) {\n    tslib_1.__extends(RecordDeepLink, _super);\n    function RecordDeepLink(record, path, options) {\n        var _this = _super.call(this, record.deepGet(path)) || this;\n        _this.record = record;\n        _this.path = path;\n        _this.options = options;\n        return _this;\n    }\n    Object.defineProperty(RecordDeepLink.prototype, \"error\", {\n        get: function () {\n            if (this._error === void 0) {\n                this._error = this.record.deepValidationError(this.path) || null;\n            }\n            return this._error;\n        },\n        set: function (x) {\n            this._error = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RecordDeepLink.prototype, \"_changeToken\", {\n        get: function () {\n            return this.record._changeToken;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RecordDeepLink.prototype.set = function (x) {\n        this.record.deepSet(this.path, x, this.options);\n    };\n    RecordDeepLink.prototype.assignFrom = function (other) {\n        this.value.assignFrom(other);\n    };\n    return RecordDeepLink;\n}(Link));\nfunction getLinksCache(record) {\n    return record._links || (record._links = new record.AttributesCopy({}));\n}\nfunction cacheLink(links, record, key) {\n    var cached = links[key], value = record[key];\n    return cached && cached.value === value ? cached\n        : links[key] = new RecordLink(record, key, value);\n}\n/***********************************\n * Collection\n */\nMixinsState.get(Record.Collection).merge([{\n        // Boolean link to the record's presence in the collection\n        linkContains: function (record) {\n            return new CollectionLink(this, record);\n        },\n        // Link to collection's property\n        linkAt: function (prop) {\n            var _this = this;\n            return Link.value(this[prop], function (x) { return _this[prop] = x; });\n        }\n    }]);\n/**\n * Boolean link to presence of NestedType's record in collection.\n * Strict evaluation of value, no error.\n * Safe implementation of _changeToken.\n */\nvar CollectionLink = /** @class */ (function (_super) {\n    tslib_1.__extends(CollectionLink, _super);\n    function CollectionLink(collection, record) {\n        var _this = _super.call(this, Boolean(collection.get(record))) || this;\n        _this.collection = collection;\n        _this.record = record;\n        return _this;\n    }\n    CollectionLink.prototype.set = function (x) {\n        this.collection.toggle(this.record, x);\n    };\n    return CollectionLink;\n}(Link));\n//# sourceMappingURL=link.js.map","import * as tslib_1 from \"tslib\";\n/**\n * React-Type-R component base class. Overrides React component.\n */\nimport * as React from 'react';\nimport { Messenger, define, definitions, mixinRules, mixins } from 'type-r';\nimport onDefine, { EmptyPropsChangeTokensCtor } from './define';\nvar Component = /** @class */ (function (_super) {\n    tslib_1.__extends(Component, _super);\n    function Component(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this._silent = 0;\n        _this._initializeState();\n        return _this;\n    }\n    Component.prototype.linkAt = function (key) {\n        // Quick and dirty hack to suppres type error - refactor later.\n        return this.state.linkAt(key);\n    };\n    Component.prototype.linkAll = function () {\n        // Quick and dirty hack to suppres type error - refactor later.\n        var state = this.state;\n        return state.linkAll.apply(state, arguments);\n    };\n    Component.prototype.linkPath = function (path) {\n        return this.state.linkPath(path);\n    };\n    Object.defineProperty(Component.prototype, \"links\", {\n        get: function () {\n            return this.state._links;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Component.prototype._initializeState = function () {\n        this.state = null;\n    };\n    Component.prototype.assignToState = function (x, key) {\n        var _a;\n        this.state.assignFrom((_a = {}, _a[key] = x, _a));\n    };\n    Component.prototype.setState = function (attrs) {\n        this.state.set(typeof attrs === 'function' ? attrs.call(this, this.state, this.props) : attrs);\n    };\n    Component.prototype.componentWillUnmount = function () {\n        this.dispose();\n        this._silent = 2;\n    };\n    /**\n     * Performs transactional update for both props and state.\n     * Suppress updates during the transaction, and force update aftewards.\n     * Wrapping the sequence of changes in a transactions guarantees that\n     * React component will be updated _after_ all the changes to the\n     * both props and local state are applied.\n     */\n    Component.prototype.transaction = function (fun) {\n        // Initialize transaction...\n        var isRoot = !this._silent;\n        if (isRoot)\n            this._silent = 1;\n        fun(this.state);\n        // Commit transaction...\n        if (isRoot) {\n            this._silent = 0;\n            this.asyncUpdate();\n        }\n    };\n    Component.prototype.shouldComponentUpdate = function () {\n        return !this._silent;\n    };\n    // Safe version of the forceUpdate suitable for asynchronous callbacks.\n    Component.prototype.asyncUpdate = function () {\n        this._silent || this.forceUpdate();\n    };\n    Component.onDefine = onDefine;\n    Component = tslib_1.__decorate([\n        define({\n            PropsChangeTokens: EmptyPropsChangeTokensCtor\n        }),\n        definitions({\n            // Definitions to be extracted from mixins and statics and passed to `onDefine()`\n            state: mixinRules.merge,\n            State: mixinRules.value,\n            store: mixinRules.merge,\n            Store: mixinRules.value,\n            props: mixinRules.merge,\n            context: mixinRules.merge,\n            childContext: mixinRules.merge,\n            pureRender: mixinRules.protoValue\n        }),\n        mixinRules({\n            // Apply old-school React mixin rules.\n            componentWillMount: mixinRules.classLast,\n            componentDidMount: mixinRules.classLast,\n            componentWillReceiveProps: mixinRules.classLast,\n            componentWillUpdate: mixinRules.classLast,\n            componentDidUpdate: mixinRules.classLast,\n            componentWillUnmount: mixinRules.classFirst,\n            // And a bit more to fix inheritance quirks.\n            shouldComponentUpdate: mixinRules.some,\n            getChildContext: mixinRules.defaults\n        })\n        // Component can send and receive events...\n        ,\n        mixins(Messenger)\n    ], Component);\n    return Component;\n}(React.Component));\nexport { Component };\nObject.defineProperty(Component.prototype, 'isMounted', {\n    value: function () {\n        return this._silent !== 2;\n    }\n});\n//# sourceMappingURL=component.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Advanced React links for purely functional two-way data binding\n *\n * MIT License, (c) 2016 Vlad Balin, Volicon.\n */\nimport { helpers, arrayHelpers } from './helpers';\n// Main Link class. All links must extend it.\nvar Link = /** @class */ (function () {\n    // create \n    function Link(value) {\n        this.value = value;\n    }\n    // Create custom link to arbitrary value\n    Link.value = function (value, set) {\n        return new CustomLink(value, set);\n    };\n    Object.defineProperty(Link.prototype, \"validationError\", {\n        // DEPRECATED: Old error holder for backward compatibility with Volicon code base\n        get: function () { return this.error; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.onChange = function (handler) {\n        var _this = this;\n        return new CloneLink(this, function (x) {\n            handler(x);\n            _this.set(x);\n        });\n    };\n    Object.defineProperty(Link.prototype, \"props\", {\n        // <input { ...link.props } />\n        get: function () {\n            var _this = this;\n            return typeof this.value === 'boolean' ? {\n                checked: this.value,\n                onChange: function (e) { return _this.set(Boolean(e.target.checked)); }\n            } : {\n                value: this.value,\n                onChange: function (e) { return _this.set(e.target.value); }\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // DEPRECATED: Old React method for backward compatibility\n    Link.prototype.requestChange = function (x) {\n        this.set(x);\n    };\n    // Immediately update the link value using given transform function.\n    Link.prototype.update = function (transform, e) {\n        var next = transform(this.clone(), e);\n        next === void 0 || this.set(next);\n    };\n    // Create new link which applies transform function on set.\n    Link.prototype.pipe = function (handler) {\n        var _this = this;\n        return new CloneLink(this, function (x) {\n            var next = handler(x, _this.value);\n            next === void 0 || _this.set(next);\n        });\n    };\n    // Create UI event handler function which will update the link with a given transform function.\n    Link.prototype.action = function (transform) {\n        var _this = this;\n        return function (e) { return _this.update(transform, e); };\n    };\n    Link.prototype.equals = function (truthyValue) {\n        return new EqualsLink(this, truthyValue);\n    };\n    Link.prototype.enabled = function (defaultValue) {\n        return new EnabledLink(this, defaultValue || \"\");\n    };\n    // Array-only links methods\n    Link.prototype.contains = function (element) {\n        return new ContainsLink(this, element);\n    };\n    Link.prototype.push = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.push.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.unshift = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.unshift.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.splice = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.splice.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.map = function (iterator) {\n        return helpers(this.value).map(this, iterator);\n    };\n    Link.prototype.removeAt = function (key) {\n        var value = this.value, _ = helpers(value);\n        this.set(_.remove(_.clone(value), key));\n    };\n    Link.prototype.at = function (key) {\n        return new LinkAt(this, key);\n    };\n    Link.prototype.clone = function () {\n        var value = this.value;\n        return helpers(value).clone(value);\n    };\n    Link.prototype.pick = function () {\n        var links = {};\n        for (var i = 0; i < arguments.length; i++) {\n            var key = arguments[i];\n            links[key] = new LinkAt(this, key);\n        }\n        return links;\n    };\n    /**\n     * Validate link with validness predicate and optional custom error object. Can be chained.\n     */\n    Link.prototype.check = function (whenValid, error) {\n        if (!this.error && !whenValid(this.value)) {\n            this.error = error || whenValid.error || defaultError;\n        }\n        return this;\n    };\n    return Link;\n}());\nexport { Link };\nvar CustomLink = /** @class */ (function (_super) {\n    tslib_1.__extends(CustomLink, _super);\n    function CustomLink(value, set) {\n        var _this = _super.call(this, value) || this;\n        _this.set = set;\n        return _this;\n    }\n    CustomLink.prototype.set = function (x) { };\n    return CustomLink;\n}(Link));\nexport { CustomLink };\nvar CloneLink = /** @class */ (function (_super) {\n    tslib_1.__extends(CloneLink, _super);\n    function CloneLink(parent, set) {\n        var _this = _super.call(this, parent.value) || this;\n        _this.set = set;\n        var error = parent.error;\n        if (error)\n            _this.error = error;\n        return _this;\n    }\n    CloneLink.prototype.set = function (x) { };\n    return CloneLink;\n}(Link));\nexport { CloneLink };\nvar EqualsLink = /** @class */ (function (_super) {\n    tslib_1.__extends(EqualsLink, _super);\n    function EqualsLink(parent, truthyValue) {\n        var _this = _super.call(this, parent.value === truthyValue) || this;\n        _this.parent = parent;\n        _this.truthyValue = truthyValue;\n        return _this;\n    }\n    EqualsLink.prototype.set = function (x) {\n        this.parent.set(x ? this.truthyValue : null);\n    };\n    return EqualsLink;\n}(Link));\nexport { EqualsLink };\nvar EnabledLink = /** @class */ (function (_super) {\n    tslib_1.__extends(EnabledLink, _super);\n    function EnabledLink(parent, defaultValue) {\n        var _this = _super.call(this, parent.value != null) || this;\n        _this.parent = parent;\n        _this.defaultValue = defaultValue;\n        return _this;\n    }\n    EnabledLink.prototype.set = function (x) {\n        this.parent.set(x ? this.defaultValue : null);\n    };\n    return EnabledLink;\n}(Link));\nexport { EnabledLink };\nvar ContainsLink = /** @class */ (function (_super) {\n    tslib_1.__extends(ContainsLink, _super);\n    function ContainsLink(parent, element) {\n        var _this = _super.call(this, parent.value.indexOf(element) >= 0) || this;\n        _this.parent = parent;\n        _this.element = element;\n        return _this;\n    }\n    ContainsLink.prototype.set = function (x) {\n        var _this = this;\n        var next = Boolean(x);\n        if (this.value !== next) {\n            var arr = this.parent.value, nextValue = x ? arr.concat(this.element) : arr.filter(function (el) { return el !== _this.element; });\n            this.parent.set(nextValue);\n        }\n    };\n    return ContainsLink;\n}(Link));\nexport { ContainsLink };\nvar defaultError = 'Invalid value';\n/**\n * Link to array or object element enclosed in parent link.\n * Performs purely functional update of the parent, shallow copying its value on `set`.\n */\nvar LinkAt = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkAt, _super);\n    function LinkAt(parent, key) {\n        var _this = _super.call(this, parent.value[key]) || this;\n        _this.parent = parent;\n        _this.key = key;\n        return _this;\n    }\n    LinkAt.prototype.remove = function () {\n        this.parent.removeAt(this.key);\n    };\n    // Set new element value to parent array or object, performing purely functional update.\n    LinkAt.prototype.set = function (x) {\n        var _this = this;\n        if (this.value !== x) {\n            this.parent.update(function (value) {\n                value[_this.key] = x;\n                return value;\n            });\n        }\n    };\n    ;\n    return LinkAt;\n}(Link));\nexport { LinkAt };\n//# sourceMappingURL=link.js.map","import * as React from 'react';\nimport { define, mixins } from 'type-r';\nimport { Component } from './component';\nimport { Element, Node } from './define';\nimport Link from './link';\n// extend React namespace\nvar ReactMVx = Object.create(React);\n// Make it compatible with ES6 module format.\nReactMVx.default = ReactMVx;\n// listenToProps, listenToState, model, attributes, Model\nReactMVx.define = define;\nReactMVx.mixins = mixins;\nReactMVx.Node = Node.value(null);\nReactMVx.Element = Element.value(null);\nReactMVx.Link = Link;\nReactMVx.Component = Component;\nvar assignToState = ReactMVx.assignToState = function (key) {\n    return function (prop) {\n        var _a;\n        var source = prop && prop instanceof Link ? prop.value : prop;\n        this.state.assignFrom((_a = {}, _a[key] = source, _a));\n        if (source && source._changeToken) {\n            this.state[key]._changeToken = source._changeToken;\n        }\n    };\n};\nexport default ReactMVx;\nexport { define, mixins, Node, Element, Link, Component, assignToState };\n//# sourceMappingURL=index.js.map"],"names":["__extends","d","b","__","this","constructor","extendStatics","prototype","Object","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","process","definition","BaseComponentClass","state","State","ComponentState","_super","apply","tslib_1.__extends","attributes","tslib_1.__decorate","define","Record","mixins","merge","StateMixin","UpdateOnNestedChangesMixin","onDefine","BaseClass","store","StoreClass","Store","ExternalStoreMixin","ExposeStoreMixin","InternalStore","attrbutes","InternalStoreMixin","compileSpecs","props","defaults","watchers","changeHandlers","propTypes","modelProto","forEachAttr","_attributes","spec","name","value","type","options","translateType","isRequired","_onChange","toLocalWatcher","changeEvents","handlers","changeEvents_1","push","next","prev","component","stopListening","listenTo","_changeEventName","asyncUpdate","convert","ref","Type","T","_translateType","Number","integer","PropTypes.number","String","PropTypes.string","Boolean","PropTypes.bool","Array","PropTypes.array","Function","PropTypes.func","PropTypes.object","Node","PropTypes.node","Element","PropTypes.element","PropTypes.any","PropTypes.instanceOf","_a","context","childContext","_context","tools","contextTypes","_childContext","childContextTypes","createChangeTokensConstructor","propNames","keys","PropsChangeTokens","map","join","_update","pureRender","_props","_b","defaultProps","_watchers","WatchersMixin","_changeHandlers","ChangeHandlersMixin","PropsChangesMixin","handlePropsChanges","name_1","_i","handler","onDefineStore","call","onDefineState","onDefineContext","onDefineProps","Messenger","helpers","getPrototypeOf","ArrayProto","arrayHelpers","ObjectProto","objectHelpers","dummyHelpers","getLinksCache","record","_links","AttributesCopy","cacheLink","links","cached","RecordLink","setPrototypeOf","__proto__","p","hasOwnProperty","_initializeState","__keepState","_owner","_ownerKey","_nestedStore","getStore","_defaultStore","global","componentWillUnmount","_preventDispose","dispose","_onChildrenChange","componentDidMount","getChildContext","get","componentWillMount","EmptyPropsChangeTokensCtor","shouldComponentUpdate","nextProps","_silent","_propsChangeTokens","upd","_s","_changeToken","_isDirty","componentDidUpdate","Component","_this","linkAt","linkAll","linkPath","path","enumerable","configurable","assignToState","x","assignFrom","setState","attrs","set","transaction","fun","isRoot","forceUpdate","definitions","mixinRules","protoValue","classLast","componentWillReceiveProps","componentWillUpdate","classFirst","some","React.Component","clone","link","remove","iterator","mapped","element","at","object","cloned","array","slice","splice","j","y","Link","CustomLink","error","onChange","CloneLink","checked","e","requestChange","update","transform","pipe","action","equals","truthyValue","EqualsLink","enabled","defaultValue","EnabledLink","contains","ContainsLink","unshift","removeAt","_","LinkAt","pick","check","whenValid","defaultError","parent","indexOf","arr","nextValue","concat","filter","el","typeR","populate","MixinsState","RecordDeepLink","attr","_error","getValidationError","other","deepGet","deepValidationError","deepSet","Collection","linkContains","CollectionLink","prop","collection","toggle","ReactMVx","React","default","source"],"mappings":"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"}
=======
{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../lib/define/state.js","../lib/define/store.js","../lib/define/typeSpecs.js","../lib/define/pureRender.js","../lib/define/props.js","../lib/define/index.js","../lib/define/context.js","../lib/component.js","../node_modules/valuelink/lib/helpers.js","../node_modules/valuelink/lib/link.js","../lib/link.js","../lib/index.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import * as tslib_1 from \"tslib\";\n/*****************\n * State\n */\nimport { define, Record, Store } from 'type-r';\nexport default function process(definition, BaseComponentClass) {\n    var prototype = this.prototype;\n    var state = definition.state, State = definition.State;\n    if (typeof state === 'function') {\n        State = state;\n        state = void 0;\n    }\n    if (state) {\n        var BaseClass = State || prototype.State || Record;\n        var ComponentState = /** @class */ (function (_super) {\n            tslib_1.__extends(ComponentState, _super);\n            function ComponentState() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            ComponentState.attributes = state;\n            ComponentState = tslib_1.__decorate([\n                define\n            ], ComponentState);\n            return ComponentState;\n        }(BaseClass));\n        prototype.State = ComponentState;\n    }\n    else if (State) {\n        prototype.State = State;\n    }\n    if (state || State) {\n        this.mixins.merge([StateMixin, UpdateOnNestedChangesMixin]);\n    }\n}\nexport var StateMixin = {\n    //state : null,\n    _initializeState: function () {\n        // props.__keepState is used to workaround issues in Backbone intergation layer\n        var state = this.state = this.props.__keepState || new this.State();\n        // Take ownership on state...\n        state._owner = this;\n        state._ownerKey = 'state';\n    },\n    context: {\n        _nestedStore: Store\n    },\n    // reference global store to fix model's store locator\n    getStore: function () {\n        // Attempt to get the store from the context first. Then - fallback to the state's default store.\n        // TBD: Need to figure out a good way of managing local stores.\n        var context, state;\n        return ((context = this.context) && context._nestedStore) ||\n            ((state = this.state) && state._defaultStore) || Store.global;\n    },\n    componentWillUnmount: function () {\n        var state = this.state;\n        state._owner = state._ownerKey = void 0;\n        this._preventDispose /* hack for component-view to preserve the state */ || state.dispose();\n        this.state = void 0;\n    }\n};\nexport var UpdateOnNestedChangesMixin = {\n    _onChildrenChange: function () { },\n    componentDidMount: function () {\n        this._onChildrenChange = this.asyncUpdate;\n    }\n};\n//# sourceMappingURL=state.js.map","import * as tslib_1 from \"tslib\";\nimport { define, Store } from 'type-r';\nimport { StateMixin, UpdateOnNestedChangesMixin } from './state';\nexport default function onDefine(definition, BaseClass) {\n    var store = definition.store, StoreClass = definition.Store;\n    if (store && store instanceof Store) {\n        // Direct reference to an existing store. Put it to the prototype.\n        this.prototype.store = store;\n        this.mixins.merge([ExternalStoreMixin, ExposeStoreMixin]);\n    }\n    else if (store || definition.Store) {\n        if (typeof store === 'function') {\n            StoreClass = store;\n            store = void 0;\n        }\n        if (store) {\n            var BaseClass_1 = StoreClass || this.prototype.Store || Store;\n            var InternalStore = /** @class */ (function (_super) {\n                tslib_1.__extends(InternalStore, _super);\n                function InternalStore() {\n                    return _super !== null && _super.apply(this, arguments) || this;\n                }\n                InternalStore.attrbutes = store;\n                InternalStore = tslib_1.__decorate([\n                    define\n                ], InternalStore);\n                return InternalStore;\n            }(BaseClass_1));\n            ;\n            this.prototype.Store = InternalStore;\n        }\n        else if (StoreClass) {\n            this.prototype.Store = StoreClass;\n        }\n        this.mixins.merge([InternalStoreMixin, UpdateOnNestedChangesMixin, ExposeStoreMixin]);\n    }\n}\n/**\n * Attached whenever the store declaration of any form is present in the component.\n */\nvar ExposeStoreMixin = {\n    childContext: {\n        _nestedStore: Store\n    },\n    getChildContext: function () {\n        return { _nestedStore: this.store };\n    },\n    getStore: function () {\n        return this.store;\n    },\n    // Will be called by the store when the lookup will fail.\n    get: function (key) {\n        // Ask upper store.\n        var store = StateMixin.getStore.call(this);\n        return store && store.get(key);\n    }\n};\n/**\n * External store must just track the changes and trigger render.\n * TBD: don't use it yet.\n */\nvar ExternalStoreMixin = {\n    componentDidMount: function () {\n        // Start UI updates on state changes.\n        this.listenTo(this.store, 'change', this.asyncUpdate);\n    }\n};\nvar InternalStoreMixin = {\n    componentWillMount: function () {\n        var store = this.store = new this.Store();\n        store._owner = this;\n        store._ownerKey = 'store';\n    },\n    componentWillUnmount: function () {\n        this.store._ownerKey = this.store._owner = void 0;\n        this.store.dispose();\n        this.store = void 0;\n    }\n};\n//# sourceMappingURL=store.js.map","import * as PropTypes from 'prop-types';\nimport { Record } from 'type-r';\nexport function compileSpecs(props) {\n    var propTypes = {}, \n    // Create NestedTypes model definition to process props spec.\n    modelProto = Record.defaults(props).prototype;\n    var defaults, watchers, changeHandlers;\n    var _loop_1 = function (spec) {\n        var name_1 = spec.name;\n        // Skip auto-generated `id` attribute.\n        if (name_1 !== 'id') {\n            var value = spec.value, type = spec.type, options = spec.options;\n            // Translate props type to the propTypes guard.\n            propTypes[name_1] = translateType(type, options.isRequired);\n            if (options._onChange) {\n                watchers || (watchers = {});\n                watchers[name_1] = toLocalWatcher(options._onChange);\n            }\n            // Handle listening to event maps...\n            if (options.changeHandlers && options.changeHandlers.length) {\n                changeHandlers || (changeHandlers = {});\n                changeHandlers[name_1] = options.changeHandlers;\n            }\n            // Handle listening to props changes...\n            if (options.changeEvents) {\n                changeHandlers || (changeHandlers = {});\n                var handlers = changeHandlers[name_1] || (changeHandlers[name_1] = []), changeEvents_1 = typeof options.changeEvents === 'string' ? options.changeEvents : null;\n                handlers.push(function (next, prev, component) {\n                    prev && component.stopListening(prev);\n                    next && component.listenTo(next, changeEvents_1 || next._changeEventName, component.asyncUpdate);\n                });\n            }\n            // If default value is explicitly provided...\n            if (value !== void 0) {\n                //...append it to getDefaultProps function.\n                defaults || (defaults = {});\n                defaults[name_1] = spec.convert(value, void 0, null, {});\n            }\n        }\n    };\n    for (var _i = 0, _a = modelProto._attributesArray; _i < _a.length; _i++) {\n        var spec = _a[_i];\n        _loop_1(spec);\n    }\n    return { propTypes: propTypes, defaults: defaults, watchers: watchers, changeHandlers: changeHandlers };\n}\nfunction toLocalWatcher(ref) {\n    return typeof ref === 'function' ? ref : function (value, name) {\n        this[ref] && this[ref](value, name);\n    };\n}\nvar Node = /** @class */ (function () {\n    function Node() {\n    }\n    return Node;\n}());\nexport { Node };\nvar Element = /** @class */ (function () {\n    function Element() {\n    }\n    return Element;\n}());\nexport { Element };\nfunction translateType(Type, isRequired) {\n    var T = _translateType(Type);\n    return isRequired ? T.isRequired : T;\n}\nfunction _translateType(Type) {\n    switch (Type) {\n        case Number:\n            return PropTypes.number;\n        case String:\n            return PropTypes.string;\n        case Boolean:\n            return PropTypes.bool;\n        case Array:\n            return PropTypes.array;\n        case Function:\n            return PropTypes.func;\n        case Object:\n            return PropTypes.object;\n        case Node:\n            return PropTypes.node;\n        case Element:\n            return PropTypes.element;\n        case void 0:\n        case null:\n            return PropTypes.any;\n        default:\n            return PropTypes.instanceOf(Type);\n    }\n}\n//# sourceMappingURL=typeSpecs.js.map","export function createChangeTokensConstructor(props) {\n    var propNames = Object.keys(props);\n    var PropsChangeTokens = new Function('p', 's', \"\\n        var v;\\n        this._s = s && s._changeToken;\\n        \" + propNames.map(function (name) { return \"\\n            this.\" + name + \" = ( ( v = p.\" + name + \") && v._changeToken ) || v;\\n        \"; }).join('') + \"\\n    \");\n    PropsChangeTokens.prototype._hasChanges = new Function('p', 's', \"\\n        var v;\\n        return ( ( s && s._changeToken ) !== this._s ) \" + propNames.map(function (name) { return \" ||\\n            this.\" + name + \" !== ( ( ( v = p.\" + name + \") && v._changeToken ) || v )\\n        \"; }).join('') + \";\\n    \");\n    return PropsChangeTokens;\n}\n;\nexport var EmptyPropsChangeTokensCtor = createChangeTokensConstructor({});\nexport var PureRenderMixin = {\n    shouldComponentUpdate: function (nextProps) {\n        return this._propsChangeTokens._hasChanges(nextProps, this.state);\n    },\n    componentDidMount: updateChangeTokens,\n    componentDidUpdate: updateChangeTokens\n};\nfunction updateChangeTokens() {\n    this._propsChangeTokens = new this.PropsChangeTokens(this.props, this.state);\n}\n//# sourceMappingURL=pureRender.js.map","/**\n * Handle props specification and everything which is related:\n * - local listening to props changes\n * - pure render mixin\n */\nimport { compileSpecs } from './typeSpecs';\nimport { PureRenderMixin, createChangeTokensConstructor } from './pureRender';\nimport { tools } from 'type-r';\nexport default function onDefine(_a, BaseClass) {\n    var props = _a.props, pureRender = _a.pureRender;\n    var prototype = this.prototype;\n    // process props spec...\n    if (props) {\n        // Merge with inherited members...\n        prototype._props = tools.defaults(props, BaseClass.prototype._props || {});\n        var _b = compileSpecs(props), propTypes = _b.propTypes, defaults = _b.defaults, watchers = _b.watchers, changeHandlers = _b.changeHandlers;\n        this.propTypes = propTypes;\n        if (defaults)\n            this.defaultProps = defaults;\n        if (watchers) {\n            prototype._watchers = watchers;\n            this.mixins.merge([WatchersMixin]);\n        }\n        if (changeHandlers) {\n            prototype._changeHandlers = changeHandlers;\n            this.mixins.merge([ChangeHandlersMixin]);\n        }\n        if (prototype.pureRender) {\n            prototype.PropsChangeTokens = createChangeTokensConstructor(props);\n        }\n    }\n    if (pureRender) {\n        this.mixins.merge([PureRenderMixin]);\n    }\n}\n/**\n * ChangeHandlers are fired in sequence upon props replacement.\n * Fires _after_ UI is updated. Used for managing events subscriptions.\n */\nvar ChangeHandlersMixin = {\n    componentDidMount: function () {\n        handlePropsChanges(this, {}, this.props);\n    },\n    componentDidUpdate: function (prev) {\n        handlePropsChanges(this, prev, this.props);\n    },\n    componentWillUnmount: function () {\n        handlePropsChanges(this, this.props, {});\n    }\n};\nfunction handlePropsChanges(component, prev, next) {\n    var _changeHandlers = component._changeHandlers;\n    for (var name_1 in _changeHandlers) {\n        if (prev[name_1] !== next[name_1]) {\n            for (var _i = 0, _a = _changeHandlers[name_1]; _i < _a.length; _i++) {\n                var handler = _a[_i];\n                handler(next[name_1], prev[name_1], component);\n            }\n        }\n    }\n}\n/**\n * Watchers works on props replacement and fires _before_ any change will be applied and UI is updated.\n * Fired in componentWillMount as well, which makes it a nice way to sync state from props.\n */\nvar WatchersMixin = {\n    componentWillReceiveProps: function (next) {\n        var _a = this, _watchers = _a._watchers, props = _a.props;\n        for (var name_2 in _watchers) {\n            if (next[name_2] !== props[name_2]) {\n                _watchers[name_2].call(this, next[name_2], name_2);\n            }\n        }\n    },\n    componentWillMount: function () {\n        var _a = this, _watchers = _a._watchers, props = _a.props;\n        for (var name_3 in _watchers) {\n            _watchers[name_3].call(this, props[name_3], name_3);\n        }\n    }\n};\n//# sourceMappingURL=props.js.map","import { Messenger } from 'type-r';\nimport onDefineStore from './store';\nimport onDefineState from './state';\nimport onDefineContext from './context';\nimport onDefineProps from './props';\nexport default function onDefine(definition, BaseClass) {\n    // Initialize mixins placeholder...\n    onDefineStore.call(this, definition, BaseClass);\n    onDefineState.call(this, definition, BaseClass);\n    onDefineContext.call(this, definition, BaseClass);\n    onDefineProps.call(this, definition, BaseClass);\n    Messenger.onDefine.call(this, definition, BaseClass);\n}\n;\nexport { Node, Element } from './typeSpecs';\nexport { EmptyPropsChangeTokensCtor } from './pureRender';\n//# sourceMappingURL=index.js.map","import { compileSpecs } from './typeSpecs';\nimport { tools } from 'type-r';\nexport default function onDefine(_a, BaseClass) {\n    var context = _a.context, childContext = _a.childContext;\n    var prototype = this.prototype;\n    if (context) {\n        // Merge in inherited members...\n        prototype._context = tools.defaults(context, BaseClass.prototype._context || {});\n        // Compile to propTypes...\n        this.contextTypes = compileSpecs(context).propTypes;\n    }\n    if (childContext) {\n        prototype._childContext = tools.defaults(childContext, BaseClass.prototype._childContext);\n        this.childContextTypes = compileSpecs(childContext).propTypes;\n    }\n}\n//# sourceMappingURL=context.js.map","import * as tslib_1 from \"tslib\";\n/**\n * React-Type-R component base class. Overrides React component.\n */\nimport * as React from 'react';\nimport { Messenger, define, definitions, mixinRules, mixins } from 'type-r';\nimport onDefine, { EmptyPropsChangeTokensCtor } from './define';\nvar Component = /** @class */ (function (_super) {\n    tslib_1.__extends(Component, _super);\n    function Component(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this._initializeState();\n        return _this;\n    }\n    Component.prototype.linkAt = function (key) {\n        // Quick and dirty hack to suppres type error - refactor later.\n        return this.state.linkAt(key);\n    };\n    Component.prototype.linkAll = function () {\n        // Quick and dirty hack to suppres type error - refactor later.\n        var state = this.state;\n        return state.linkAll.apply(state, arguments);\n    };\n    Component.prototype.linkPath = function (path) {\n        return this.state.linkPath(path);\n    };\n    Object.defineProperty(Component.prototype, \"links\", {\n        get: function () {\n            return this.state._links;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Component.prototype._initializeState = function () {\n        this.state = null;\n    };\n    Component.prototype.assignToState = function (x, key) {\n        var _a;\n        this.state.assignFrom((_a = {}, _a[key] = x, _a));\n    };\n    Component.prototype.setState = function (attrs) {\n        this.state.set(typeof attrs === 'function' ? attrs.call(this, this.state, this.props) : attrs);\n    };\n    Component.prototype.componentWillUnmount = function () {\n        this.dispose();\n    };\n    /**\n     * Performs transactional update for both props and state.\n     * Suppress updates during the transaction, and force update aftewards.\n     * Wrapping the sequence of changes in a transactions guarantees that\n     * React component will be updated _after_ all the changes to the\n     * both props and local state are applied.\n     */\n    Component.prototype.transaction = function (fun) {\n        var shouldComponentUpdate = this.shouldComponentUpdate, isRoot = shouldComponentUpdate !== returnFalse;\n        if (isRoot) {\n            this.shouldComponentUpdate = returnFalse;\n        }\n        var _a = this, state = _a.state, store = _a.store, withStore = store ? function (state) { return store.transaction(function () { return fun(state); }); } : fun;\n        state ? state.transaction(withStore) : withStore(state);\n        if (isRoot) {\n            this.shouldComponentUpdate = shouldComponentUpdate;\n            this.asyncUpdate();\n        }\n    };\n    // Safe version of the forceUpdate suitable for asynchronous callbacks.\n    Component.prototype.asyncUpdate = function () {\n        this.shouldComponentUpdate === returnFalse || this._disposed || this.forceUpdate();\n    };\n    Component.onDefine = onDefine;\n    Component = tslib_1.__decorate([\n        define({\n            PropsChangeTokens: EmptyPropsChangeTokensCtor\n        }),\n        definitions({\n            // Definitions to be extracted from mixins and statics and passed to `onDefine()`\n            state: mixinRules.merge,\n            State: mixinRules.value,\n            store: mixinRules.merge,\n            Store: mixinRules.value,\n            props: mixinRules.merge,\n            context: mixinRules.merge,\n            childContext: mixinRules.merge,\n            pureRender: mixinRules.protoValue\n        }),\n        mixinRules({\n            // Apply old-school React mixin rules.\n            componentWillMount: mixinRules.classLast,\n            componentDidMount: mixinRules.classLast,\n            componentWillReceiveProps: mixinRules.classLast,\n            componentWillUpdate: mixinRules.classLast,\n            componentDidUpdate: mixinRules.classLast,\n            componentWillUnmount: mixinRules.classFirst,\n            // And a bit more to fix inheritance quirks.\n            shouldComponentUpdate: mixinRules.some,\n            getChildContext: mixinRules.defaults\n        })\n        // Component can send and receive events...\n        ,\n        mixins(Messenger)\n    ], Component);\n    return Component;\n}(React.Component));\nexport { Component };\nfunction returnFalse() { return false; }\n// Looks like React guys _really_ want to deprecate it. But no way.\n// We will work around their attempt.\nObject.defineProperty(Component.prototype, 'isMounted', {\n    value: function isMounted() {\n        return !this._disposed;\n    }\n});\n//# sourceMappingURL=component.js.map","var ArrayProto = Array.prototype, ObjectProto = Object.prototype;\nexport function helpers(value) {\n    if (value && typeof value === 'object') {\n        switch (Object.getPrototypeOf(value)) {\n            case ArrayProto: return arrayHelpers;\n            case ObjectProto: return objectHelpers;\n        }\n    }\n    return dummyHelpers;\n}\n// Do nothing for types other than Array and plain Object.\nvar dummyHelpers = {\n    clone: function (value) { return value; },\n    map: function (link, fun) { return []; },\n    remove: function (value) { return value; }\n};\n// `map` and `clone` for plain JS objects\nexport var objectHelpers = {\n    // Map through the link to object\n    map: function (link, iterator) {\n        var mapped = [];\n        for (var key in link.value) {\n            var element = iterator(link.at(key), key);\n            element === void 0 || (mapped.push(element));\n        }\n        return mapped;\n    },\n    remove: function (object, key) {\n        delete object[key];\n        return object;\n    },\n    // Shallow clone plain JS object\n    clone: function (object) {\n        var cloned = {};\n        for (var key in object) {\n            cloned[key] = object[key];\n        }\n        return cloned;\n    }\n};\n// `map` and `clone` helpers for arrays.\nexport var arrayHelpers = {\n    // Shallow clone array\n    clone: function (array) {\n        return array.slice();\n    },\n    remove: function (array, i) {\n        array.splice(i, 1);\n        return array;\n    },\n    // Map through the link to array\n    map: function (link, iterator) {\n        var length = link.value.length, mapped = Array(length);\n        for (var i = 0, j = 0; i < length; i++) {\n            var y = iterator(link.at(i), i);\n            y === void 0 || (mapped[j++] = y);\n        }\n        mapped.length === j || (mapped.length = j);\n        return mapped;\n    }\n};\n//# sourceMappingURL=helpers.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Advanced React links for purely functional two-way data binding\n *\n * MIT License, (c) 2016 Vlad Balin, Volicon.\n */\nimport { helpers, arrayHelpers } from './helpers';\n// Main Link class. All links must extend it.\nvar Link = /** @class */ (function () {\n    // create \n    function Link(value) {\n        this.value = value;\n    }\n    // Create custom link to arbitrary value\n    Link.value = function (value, set) {\n        return new CustomLink(value, set);\n    };\n    Object.defineProperty(Link.prototype, \"validationError\", {\n        // DEPRECATED: Old error holder for backward compatibility with Volicon code base\n        get: function () { return this.error; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.onChange = function (handler) {\n        var _this = this;\n        return new CloneLink(this, function (x) {\n            handler(x);\n            _this.set(x);\n        });\n    };\n    Object.defineProperty(Link.prototype, \"props\", {\n        // <input { ...link.props } />\n        get: function () {\n            var _this = this;\n            return typeof this.value === 'boolean' ? {\n                checked: this.value,\n                onChange: function (e) { return _this.set(Boolean(e.target.checked)); }\n            } : {\n                value: this.value,\n                onChange: function (e) { return _this.set(e.target.value); }\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // DEPRECATED: Old React method for backward compatibility\n    Link.prototype.requestChange = function (x) {\n        this.set(x);\n    };\n    // Immediately update the link value using given transform function.\n    Link.prototype.update = function (transform, e) {\n        var next = transform(this.clone(), e);\n        next === void 0 || this.set(next);\n    };\n    // Create new link which applies transform function on set.\n    Link.prototype.pipe = function (handler) {\n        var _this = this;\n        return new CloneLink(this, function (x) {\n            var next = handler(x, _this.value);\n            next === void 0 || _this.set(next);\n        });\n    };\n    // Create UI event handler function which will update the link with a given transform function.\n    Link.prototype.action = function (transform) {\n        var _this = this;\n        return function (e) { return _this.update(transform, e); };\n    };\n    Link.prototype.equals = function (truthyValue) {\n        return new EqualsLink(this, truthyValue);\n    };\n    Link.prototype.enabled = function (defaultValue) {\n        return new EnabledLink(this, defaultValue || \"\");\n    };\n    // Array-only links methods\n    Link.prototype.contains = function (element) {\n        return new ContainsLink(this, element);\n    };\n    Link.prototype.push = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.push.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.unshift = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.unshift.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.splice = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.splice.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.map = function (iterator) {\n        return helpers(this.value).map(this, iterator);\n    };\n    Link.prototype.removeAt = function (key) {\n        var value = this.value, _ = helpers(value);\n        this.set(_.remove(_.clone(value), key));\n    };\n    Link.prototype.at = function (key) {\n        return new LinkAt(this, key);\n    };\n    Link.prototype.clone = function () {\n        var value = this.value;\n        return helpers(value).clone(value);\n    };\n    Link.prototype.pick = function () {\n        var links = {};\n        for (var i = 0; i < arguments.length; i++) {\n            var key = arguments[i];\n            links[key] = new LinkAt(this, key);\n        }\n        return links;\n    };\n    /**\n     * Validate link with validness predicate and optional custom error object. Can be chained.\n     */\n    Link.prototype.check = function (whenValid, error) {\n        if (!this.error && !whenValid(this.value)) {\n            this.error = error || whenValid.error || defaultError;\n        }\n        return this;\n    };\n    return Link;\n}());\nexport { Link };\nvar CustomLink = /** @class */ (function (_super) {\n    tslib_1.__extends(CustomLink, _super);\n    function CustomLink(value, set) {\n        var _this = _super.call(this, value) || this;\n        _this.set = set;\n        return _this;\n    }\n    CustomLink.prototype.set = function (x) { };\n    return CustomLink;\n}(Link));\nexport { CustomLink };\nvar CloneLink = /** @class */ (function (_super) {\n    tslib_1.__extends(CloneLink, _super);\n    function CloneLink(parent, set) {\n        var _this = _super.call(this, parent.value) || this;\n        _this.set = set;\n        var error = parent.error;\n        if (error)\n            _this.error = error;\n        return _this;\n    }\n    CloneLink.prototype.set = function (x) { };\n    return CloneLink;\n}(Link));\nexport { CloneLink };\nvar EqualsLink = /** @class */ (function (_super) {\n    tslib_1.__extends(EqualsLink, _super);\n    function EqualsLink(parent, truthyValue) {\n        var _this = _super.call(this, parent.value === truthyValue) || this;\n        _this.parent = parent;\n        _this.truthyValue = truthyValue;\n        return _this;\n    }\n    EqualsLink.prototype.set = function (x) {\n        this.parent.set(x ? this.truthyValue : null);\n    };\n    return EqualsLink;\n}(Link));\nexport { EqualsLink };\nvar EnabledLink = /** @class */ (function (_super) {\n    tslib_1.__extends(EnabledLink, _super);\n    function EnabledLink(parent, defaultValue) {\n        var _this = _super.call(this, parent.value != null) || this;\n        _this.parent = parent;\n        _this.defaultValue = defaultValue;\n        return _this;\n    }\n    EnabledLink.prototype.set = function (x) {\n        this.parent.set(x ? this.defaultValue : null);\n    };\n    return EnabledLink;\n}(Link));\nexport { EnabledLink };\nvar ContainsLink = /** @class */ (function (_super) {\n    tslib_1.__extends(ContainsLink, _super);\n    function ContainsLink(parent, element) {\n        var _this = _super.call(this, parent.value.indexOf(element) >= 0) || this;\n        _this.parent = parent;\n        _this.element = element;\n        return _this;\n    }\n    ContainsLink.prototype.set = function (x) {\n        var _this = this;\n        var next = Boolean(x);\n        if (this.value !== next) {\n            var arr = this.parent.value, nextValue = x ? arr.concat(this.element) : arr.filter(function (el) { return el !== _this.element; });\n            this.parent.set(nextValue);\n        }\n    };\n    return ContainsLink;\n}(Link));\nexport { ContainsLink };\nvar defaultError = 'Invalid value';\n/**\n * Link to array or object element enclosed in parent link.\n * Performs purely functional update of the parent, shallow copying its value on `set`.\n */\nvar LinkAt = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkAt, _super);\n    function LinkAt(parent, key) {\n        var _this = _super.call(this, parent.value[key]) || this;\n        _this.parent = parent;\n        _this.key = key;\n        return _this;\n    }\n    LinkAt.prototype.remove = function () {\n        this.parent.removeAt(this.key);\n    };\n    // Set new element value to parent array or object, performing purely functional update.\n    LinkAt.prototype.set = function (x) {\n        var _this = this;\n        if (this.value !== x) {\n            this.parent.update(function (value) {\n                value[_this.key] = x;\n                return value;\n            });\n        }\n    };\n    ;\n    return LinkAt;\n}(Link));\nexport { LinkAt };\n//# sourceMappingURL=link.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Import ValueLink library\n * Define value links binding mixins to the Record and Collection\n */\nimport { Mixable, MixinsState, Record } from 'type-r';\nimport { Link } from 'valuelink/lib/link';\nexport default Link;\nMixable.mixins.populate(Link);\n/**\n * Record\n */\nMixinsState.get(Record).merge([{\n        // Link to the record's attribute by its key.\n        linkAt: function (key) {\n            return cacheLink(getLinksCache(this), this, key);\n        },\n        // Link to the attribute of the record's tree by symbolic path.\n        linkPath: function (path, options) {\n            return new RecordDeepLink(this, path, options);\n        },\n        // Link all (or listed) attributes and return links cache.\n        linkAll: function () {\n            var links = getLinksCache(this);\n            if (arguments.length) {\n                for (var i = 0; i < arguments.length; i++) {\n                    cacheLink(links, this, arguments[i]);\n                }\n            }\n            else {\n                var attributes = this.attributes;\n                for (var key in attributes) {\n                    attributes[key] === void 0 || cacheLink(links, this, key);\n                }\n            }\n            return links;\n        }\n    }]);\n/**\n * Link to Type-R's record attribute.\n * Strict evaluation of value, lazy evaluation of validation error.\n * Links are cached in the records\n */\nvar RecordLink = /** @class */ (function (_super) {\n    tslib_1.__extends(RecordLink, _super);\n    function RecordLink(record, attr, value) {\n        var _this = _super.call(this, value) || this;\n        _this.record = record;\n        _this.attr = attr;\n        return _this;\n    }\n    RecordLink.prototype.set = function (x) {\n        this.record[this.attr] = x;\n    };\n    Object.defineProperty(RecordLink.prototype, \"error\", {\n        get: function () {\n            return this._error === void 0 ?\n                this.record.getValidationError(this.attr) :\n                this._error;\n        },\n        set: function (x) {\n            this._error = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RecordLink.prototype.assignFrom = function (other) {\n        this.value.assignFrom(other);\n    };\n    return RecordLink;\n}(Link));\nvar RecordDeepLink = /** @class */ (function (_super) {\n    tslib_1.__extends(RecordDeepLink, _super);\n    function RecordDeepLink(record, path, options) {\n        var _this = _super.call(this, record.deepGet(path)) || this;\n        _this.record = record;\n        _this.path = path;\n        _this.options = options;\n        return _this;\n    }\n    Object.defineProperty(RecordDeepLink.prototype, \"error\", {\n        get: function () {\n            if (this._error === void 0) {\n                this._error = this.record.deepValidationError(this.path) || null;\n            }\n            return this._error;\n        },\n        set: function (x) {\n            this._error = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RecordDeepLink.prototype, \"_changeToken\", {\n        get: function () {\n            return this.record._changeToken;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RecordDeepLink.prototype.set = function (x) {\n        this.record.deepSet(this.path, x, this.options);\n    };\n    RecordDeepLink.prototype.assignFrom = function (other) {\n        this.value.assignFrom(other);\n    };\n    return RecordDeepLink;\n}(Link));\nfunction getLinksCache(record) {\n    return record._links || (record._links = new record.AttributesCopy({}));\n}\nfunction cacheLink(links, record, key) {\n    var cached = links[key], value = record[key];\n    return cached && cached.value === value ? cached\n        : links[key] = new RecordLink(record, key, value);\n}\n/***********************************\n * Collection\n */\nMixinsState.get(Record.Collection).merge([{\n        // Boolean link to the record's presence in the collection\n        linkContains: function (record) {\n            return new CollectionLink(this, record);\n        },\n        // Link to collection's property\n        linkAt: function (prop) {\n            var _this = this;\n            return Link.value(this[prop], function (x) { return _this[prop] = x; });\n        }\n    }]);\n/**\n * Boolean link to presence of NestedType's record in collection.\n * Strict evaluation of value, no error.\n * Safe implementation of _changeToken.\n */\nvar CollectionLink = /** @class */ (function (_super) {\n    tslib_1.__extends(CollectionLink, _super);\n    function CollectionLink(collection, record) {\n        var _this = _super.call(this, Boolean(collection.get(record))) || this;\n        _this.collection = collection;\n        _this.record = record;\n        return _this;\n    }\n    CollectionLink.prototype.set = function (x) {\n        this.collection.toggle(this.record, x);\n    };\n    return CollectionLink;\n}(Link));\n//# sourceMappingURL=link.js.map","import * as React from 'react';\nimport { define, mixins, type } from 'type-r';\nimport { Component } from './component';\nimport { Element, Node } from './define';\nimport Link from './link';\n// extend React namespace\nvar ReactMVx = Object.create(React);\n// Make it compatible with ES6 module format.\nReactMVx.default = ReactMVx;\n// listenToProps, listenToState, model, attributes, Model\nReactMVx.define = define;\nReactMVx.mixins = mixins;\nReactMVx.Node = type(Node).value(null);\nReactMVx.Element = type(Element).value(null);\nReactMVx.Link = Link;\nReactMVx.Component = Component;\nvar assignToState = ReactMVx.assignToState = function (key) {\n    return function (prop) {\n        var _a;\n        var source = prop && prop instanceof Link ? prop.value : prop;\n        this.state.assignFrom((_a = {}, _a[key] = source, _a));\n        if (source && source._changeToken) {\n            this.state[key]._changeToken = source._changeToken;\n        }\n    };\n};\nexport default ReactMVx;\nexport { define, mixins, Node, Element, Link, Component, assignToState };\n//# sourceMappingURL=index.js.map"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","StateMixin","_initializeState","state","props","__keepState","State","_owner","_ownerKey","context","_nestedStore","Store","getStore","_defaultStore","global","componentWillUnmount","_preventDispose","dispose","UpdateOnNestedChangesMixin","_onChildrenChange","componentDidMount","asyncUpdate","ExposeStoreMixin","childContext","getChildContext","store","get","call","ExternalStoreMixin","listenTo","InternalStoreMixin","componentWillMount","compileSpecs","defaults","watchers","changeHandlers","propTypes","_loop_1","spec","ref","Type","isRequired","T","name_1","name","value","type","options","Number","PropTypes.number","String","PropTypes.string","Boolean","PropTypes.bool","PropTypes.array","Function","PropTypes.func","PropTypes.object","Node","PropTypes.node","Element","PropTypes.element","PropTypes.any","PropTypes.instanceOf","_translateType","_onChange","changeEvents","handlers","changeEvents_1","push","next","prev","component","stopListening","_changeEventName","convert","_i","_a","Record","_attributesArray","createChangeTokensConstructor","propNames","keys","PropsChangeTokens","map","join","_hasChanges","EmptyPropsChangeTokensCtor","PureRenderMixin","shouldComponentUpdate","nextProps","_propsChangeTokens","updateChangeTokens","componentDidUpdate","ChangeHandlersMixin","handlePropsChanges","_changeHandlers","handler","WatchersMixin","componentWillReceiveProps","_watchers","name_2","name_3","onDefine","definition","BaseClass","StoreClass","mixins","merge","InternalStore","_super","apply","tslib_1.__extends","attrbutes","tslib_1.__decorate","define","BaseComponentClass","ComponentState","attributes","_context","tools","contextTypes","_childContext","childContextTypes","pureRender","_props","_b","defaultProps","Messenger","Component","_this","linkAt","linkAll","linkPath","path","_links","enumerable","configurable","assignToState","x","assignFrom","setState","attrs","set","transaction","fun","isRoot","returnFalse","withStore","_disposed","forceUpdate","definitions","mixinRules","protoValue","classLast","componentWillUpdate","classFirst","some","React.Component","ArrayProto","ObjectProto","helpers","getPrototypeOf","arrayHelpers","objectHelpers","dummyHelpers","clone","link","remove","iterator","mapped","element","at","object","cloned","array","slice","splice","j","y","Link","CustomLink","error","onChange","CloneLink","checked","e","requestChange","update","transform","pipe","action","equals","truthyValue","EqualsLink","enabled","defaultValue","EnabledLink","contains","ContainsLink","unshift","removeAt","_","LinkAt","pick","links","check","whenValid","defaultError","parent","indexOf","arr","nextValue","concat","filter","el","typeR","populate","MixinsState","cacheLink","getLinksCache","RecordDeepLink","RecordLink","record","attr","_error","getValidationError","other","deepGet","deepValidationError","_changeToken","deepSet","AttributesCopy","cached","Collection","linkContains","CollectionLink","prop","collection","toggle","ReactMVx","React","default","source"],"mappings":"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"}
>>>>>>> develop
